!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="modules/layer-hotkeys/scripts/",n(n.s="./module-dev/layer-hotkeys/src/scripts/index.js")}({"./module-dev/layer-hotkeys/src/scripts/index.js":
/*!*******************************************************!*\
  !*** ./module-dev/layer-hotkeys/src/scripts/index.js ***!
  \*******************************************************/
/*! no exports provided */function(e,t,n){"use strict";n.r(t);var o=n(/*! ./layer-hotkeys.js */"./module-dev/layer-hotkeys/src/scripts/layer-hotkeys.js"),i=n(/*! ./settings-extender.js */"./module-dev/layer-hotkeys/src/scripts/settings-extender.js");Object(i.default)(),Object(o.default)()},"./module-dev/layer-hotkeys/src/scripts/layer-hotkeys.js":
/*!***************************************************************!*\
  !*** ./module-dev/layer-hotkeys/src/scripts/layer-hotkeys.js ***!
  \***************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),t.default=function(){Hooks.once("ready",async()=>{CONFIG["layer-hotkeys"]={layer:{},tool:{}};const e={token:"t",measure:"m",tiles:"i",drawings:"d",walls:"w",lighting:"l",sounds:"s",notes:"n"};let t=0;for(let n of ui.controls.controls)0!=n.visible&&(game.settings.register("layer-hotkeys","control-"+n.name,{name:n.title,hint:game.i18n.localize("LAYER-HOTKEYS.ControlsHint")+" "+game.i18n.localize(n.title),scope:"user",config:!0,default:e[n.name]||null,type:window.Azzu.SettingsTypes.KeyBinding,onChange:e=>{CONFIG["layer-hotkeys"].layer[n.name]=e}}),CONFIG["layer-hotkeys"].layer[n.name]=game.settings.get("layer-hotkeys","control-"+n.name),t=Math.max(n.tools.length,t));for(let e=1;e<=t;e++)game.settings.register("layer-hotkeys","tool-"+e,{name:game.i18n.localize("LAYER-HOTKEYS.ToolName")+" "+e,hint:game.i18n.localize("LAYER-HOTKEYS.ToolsHint")+" "+game.i18n.localize("LAYER-HOTKEYS.ToolName")+" "+e,scope:"user",config:!0,default:(e%10).toString()||"0",type:window.Azzu.SettingsTypes.KeyBinding,onChange:t=>{CONFIG["layer-hotkeys"].tool[e]=t}}),CONFIG["layer-hotkeys"].tool[e]=game.settings.get("layer-hotkeys","tool-"+e)}),Hooks.on("renderExtendedSettingsConfig",(e,t,n)=>{t.find("button:submit").on("click",e=>ui.controls.render())}),Hooks.once("init",()=>{window.addEventListener("keydown",e=>{if(e.repeat)return!0;if("BODY"!==document.activeElement.tagName)return!0;for(let t of ui.controls.controls){if(0==t.visible)continue;const n=window.Azzu.SettingsTypes.KeyBinding.parse(CONFIG["layer-hotkeys"].layer[t.name]);if(window.Azzu.SettingsTypes.KeyBinding.eventIsForBinding(e,n)){e.preventDefault(),e.stopPropagation(),canvas.getLayer(t.layer).activate();let n=e=>{const o=window.Azzu.SettingsTypes.KeyBinding.parse(CONFIG["layer-hotkeys"].layer[t.name]);if(window.Azzu.SettingsTypes.KeyBinding.eventIsForBinding(e,o))return e.preventDefault(),e.stopPropagation(),window.removeEventListener("keyup",n),!1};return window.addEventListener("keyup",n),!1}}const t=ui.controls.controls.find(e=>e.name===ui.controls.activeControl),n=t.tools.filter(e=>!1!==e.visible)||[];for(let o=0;o<n.length;o++){const i=window.Azzu.SettingsTypes.KeyBinding.parse(CONFIG["layer-hotkeys"].tool[o+1]);let r=window.Azzu.SettingsTypes.KeyBinding.eventIsForBinding(e,i);if("walls"===t.name&&(i.ctrlKey=!0,r=r||window.Azzu.SettingsTypes.KeyBinding.eventIsForBinding(e,i)),r){if(e.preventDefault(),e.stopPropagation(),n[o].onClick?n[o].onClick():(t.activeTool=n[o].name,ui.controls.render()),"walls"===t.name){let e=canvas.activeLayer;if(e.preview.children[0]){let t=e.preview.children[0];const n=e._getWallDataFromActiveTool(game.activeTool);let o=t.data;n.c=o.c,t.data=n}}let i=e=>{const t=window.Azzu.SettingsTypes.KeyBinding.parse(CONFIG["layer-hotkeys"].tool[o+1]);if(window.Azzu.SettingsTypes.KeyBinding.eventIsForBinding(e,t))return e.preventDefault(),e.stopPropagation(),window.removeEventListener(i),!1};return window.addEventListener("keyup",i),!1}}return!0})}),Hooks.on("renderSceneControls",(e,t,n)=>{let o=t.children("li.scene-control"),i={};for(let[e,t]of Object.entries(CONFIG["layer-hotkeys"].layer))i[t]=e;let r={};for(let[e,t]of Object.entries(CONFIG["layer-hotkeys"].tool))r[t]=e;for(let e=0;e<o.length;e++){const t=o[e];t.getAttribute("title");let n=CONFIG["layer-hotkeys"].layer[t.getAttribute("data-control")];void 0!==n&&(t.title+=" ["+n.toUpperCase()+"]");let i=t.getElementsByClassName("control-tool");for(let e=0;e<i.length;e++){let t=i[e].title+" ["+CONFIG["layer-hotkeys"].tool[e+1]+"]";i[e].title=t}}})}},"./module-dev/layer-hotkeys/src/scripts/settings-extender.js":
/*!*******************************************************************!*\
  !*** ./module-dev/layer-hotkeys/src/scripts/settings-extender.js ***!
  \*******************************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),t.default=function(){const e={major:1,minor:1,patch:3};window.Azzu=window.Azzu||{},function(){if(window.Azzu.SettingsTypes)return;window.Azzu.SettingsTypes=function(){const e={ctrlKey:"Ctrl + ",shiftKey:"Shift + ",metaKey:"Meta + ",altKey:"Alt + "};function t(t,n){return Object.entries(e).reduce((e,[t,o])=>(e[n].includes(o)?(e[t]=!0,e[n]=e[n].replace(o,"")):e[t]=!1,e),{[n]:t})}function n(t){return Object.entries(e).reduce((e,[n,o])=>e+(t[n]?o:""),"")}function o(t,n,o){return function(t,n){return Object.keys(e).reduce((e,o)=>e&&t[o]===n[o],!0)}(t=t.originalEvent||t,n)&&t[o]===n[o]}const i=["Shift","Alt","Control","Meta","F5"];function r(e){return e}function s(e){return e}function a(e){return e}r._MOUSE_BUTTONS=new Proxy({0:"LeftClick",1:"MiddleClick",2:"RightClick"},{get:(e,t)=>t in e?e[t]:"Mouse"+(+t+1)}),r._eventHandlers={mousedown(e){(e=e.originalEvent||e).preventDefault();const t=$(e.target);t.focus(),t.val(r.format(e))},keydown(e){if(e=e.originalEvent||e,!i.includes(e.key)&&(e.preventDefault(),"Escape"===e.key)){$(e.target).val("")}}},r.parse=e=>{if(!e)return e;const n=t(e,"button");return/Mouse\d/.test(n.button)?n.button=+n.button[5]:n.button=Object.entries(r._MOUSE_BUTTONS).reduce((e,[t,n])=>e===n?+t:e,n.button),n},r.format=e=>n(e)+r._MOUSE_BUTTONS[e.button],r.eventIsForBinding=(e,t)=>o(e,t,"button"),s._LOCATIONS={0:"",1:"Left ",2:"Right ",3:"Numpad "},s._eventHandlers={keydown(e){if(e=e.originalEvent||e,i.includes(e.key))return;e.preventDefault();const t=$(e.target);"Escape"!==e.key?t.val(s.format(e)):t.val("")}},s.parse=e=>{if(!e)return e;const n=t(e,"key");return Object.entries(s._LOCATIONS).filter(e=>""!==e[1]).reduce((e,[t,n])=>(e.key.includes(n)&&(e.location=t,e.key=e.key.replace(n,"")),e),{...n,location:0})},s.format=e=>n(e)+s._LOCATIONS[e.location]+e.key,s.eventIsForBinding=(e,t)=>o(e,t,"key");const l={FilePickerImage:a,FilePickerVideo:function(e){return e},FilePickerImageVideo:function(e){return e},FilePickerAudio:function(e){return e}};a._init=e=>{e.find('[data-dtype^="FilePicker"]').each((e,t)=>{const n=$(t);n.parent().find(".hint").css("order","100");const o=n.attr("name"),i=n.data("dtype").substring("FilePicker".length).toLowerCase(),r=$('<button type=button class=file-picker title="Browse Files" tabindex=-1><i class="fas fa-file-import fa-fw"></i></button>');r.attr("data-type",i),r.attr("data-target",o),n.after(r)})},Object.values(l).forEach(e=>{e.parse=e=>e,e.format=e=>e});class c extends FilePicker{constructor(e){super(e),this.extensions=[]}activateListeners(e){super.activateListeners(e),e.find(".form-footer").remove(),e.find(".dir").each((e,t)=>{const n=$(t);n.css("padding-left",0);const o=$("<button type=button>Select</button>");o.css("width","auto"),o.css("margin-left","0"),this._addOnClick(o,n.data("path")),n.prepend(o)}),e.find(".note").text("No subdirectories.");const t=$("<button type=button>Select current directory</button>");this._addOnClick(t,e.find("[name=target]").val()),e.append(t)}_addOnClick(e,t){e.click(e=>{e.stopPropagation(),$(this.field).val(t),this.close()})}}function u(e){return e}return u.parse=e=>e,u.format=e=>e,u._init=e=>{e.find(`[data-dtype="${u.name}"]`).each((e,t)=>{const n=$(t),o=$('<button type=button title="Browse Directories" tabindex=-1><i class="fas fa-file-import fa-fw"></i></button>');o.css("flex","0 0 24px"),o.css("line-height","24px"),o.css("margin-left","4px"),n.after(o),o.click(e=>{e.preventDefault(),new c({field:n,current:n.val(),button:o}).browse()})})},{MouseButtonBinding:r,KeyBinding:s,...l,DirectoryPicker:u}}()}(),Hooks.once("ready",()=>{(function(){const t=window.Azzu.ExtendedSettingsConfig;if(!t)return!1;const n=t.settingsExtenderVersion;if(!n)return!1;const o=e;return n.major<o.major||n.minor<o.minor||n.patch<o.patch})()||(window.Azzu.ExtendedSettingsConfig=n,game.settings._sheet=new n(game.settings.settings))});class t{static getSettingsConfigModules(e){const t=e.settings&&e.settings.modules,n=e.modules;return e.data&&e.data.modules||n||t}static getGameSettting(e){const t=game.settings.settings;return t instanceof Map?t.get(e):t[e]}}class n extends SettingsConfig{static get settingsExtenderVersion(){return e}static get defaultOptions(){return mergeObject(super.defaultOptions,{baseApplication:"SettingsConfig"})}getData(){const e=super.getData();return t.getSettingsConfigModules(e).flatMap(e=>e.settings).forEach(e=>{const n=e.module+"."+e.key,o=t.getGameSettting(n).type;e.type="function"==typeof o?o.name:"unknown"}),e}activateListeners(e){let t=window.Azzu.SettingsTypes;Object.values(t).forEach(t=>t._init&&t._init(e)),super.activateListeners(e),Object.entries(t).forEach(([t,n])=>{if(!n._eventHandlers)return;const o=e.find(`[data-dtype="${t}"`);Object.entries(n._eventHandlers).forEach(([e,t])=>{o.on(e,t)})})}}}}});
//# sourceMappingURL=index.js.map